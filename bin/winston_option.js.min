function getSelect(e,t,n){var r=document.createElement("SELECT");for(var i=0;i<t.length;i++){var s=document.createElement("OPTION");s.appendChild(document.createTextNode(t[i][1].toString()));s.value=t[i][0];if(t[i][0]==n){r.selectedIndex=i;s.setAttribute("selected","true")}r.appendChild(s)}return r}function getTextInput(e,t){var n=document.createElement("INPUT");if(t!=undefined){n.value=t}return n}function restore_options(){var e=undefined;Object.keys(SETTINGS).forEach(function(t){e=SETTINGS[t];if(e.render_as!="text"){restore_select(t)}else{restore_field(t)}});if(localStorage["winston_wait"]=="1"){$("#winston_wait").attr("checked","checked")}else{$("#winston_wait").attr("checked","")}get_saved_entries()}function restore_field(e){var t=localStorage[e];if(!t){return}var n=document.getElementById(e);n.value=t}function get_saved_entries(){if(localStorage["winston_do_saved"]=="y"){$("#winston_save").attr("checked","checked");if(!localStorage["winston_do_saved"]){$("#winston_save").attr("checked","");return}data=JSON.parse(localStorage["winston_saved"]);table=document.getElementById("save_table");for(i in data){trtag=i%2==0?"<tr>":"<tr class='alt'>";$(table).html($(table).html()+trtag+"<td>"+data[i]["date"]+"</td><td>"+data[i]["time"]+"</td><td>"+data[i]["data"].length+"</td><td><a class='wcop' id='"+i+"'>Re-Copy</a>-<a class='wres' id='"+i+"'>Restore</a>-<a class='wdel' id='"+i+"'>X</a></td></tr>")}}else{$("#saved_stuff").hide()}}function copyToClipboard(e){for(i=0;i<e.length;i++){e[i]=e[i][1]}var t=document.createElement("div");t.contentEditable=true;document.body.appendChild(t);t.innerHTML=e.join("<br/>");t.unselectable="off";t.focus();document.execCommand("SelectAll");document.execCommand("Copy",false,null);document.body.removeChild(t);alert(e.length+" Test items copied to clipboard.")}function restore_select(e){var t=localStorage[e];if(!t){return}var n=document.getElementById(e);for(var r=0;r<n.children.length;r++){var i=n.children[r];if(i.value==t.toString()){i.selected="true";break}}}var SETTINGS={winston_selector:{render_as:"sel",label:"Selector Type",description:"Depicts what kind of selector is used in the test.",options:[["xpath","XPATH"],["css","CSS"]]},winston_position:{render_as:"sel",label:"Position",description:"Position of the winston bar on the screen",options:[["1-1-0-0","Top Right"],["1-0-0-1","Top Left"],["0-1-1-0","Bottom Right"],["1-0-1-1","Bottom Left"]],"default":"0-1-1-0"},winston_index_behaviour:{render_as:"aldn",label:"Indexed Selector",description:"Allow, if an element can't be uniquely resolved to a composite of it's ID, class, or attributes,  an index selector to be used."},winston_scoping_behaviour:{render_as:"aldn",label:"Scoped Selector",description:"Allow winston to select an element by recursively selecting parent nodes until finding one that resolves uniquely with the current criteria."},winston_allow_label_click:{render_as:"aldn",label:"Click By Content",description:"Allow clicks to resolve to the content of their container. ie allow for use of click_link('my link'), click_button('Save') etc. Having this set to no may lead to denied clicks, but strengthens the test against changes to code."},winston_required:{render_as:"text",label:"Required In Selector",description:"A comma-separated list of items required to exist in a tag. If you'd like to only accept click events on objects that have classes, we put '.' as one/the item in the list. Example: I'm a stickler and only want to select objects with a class AND id, so I'd put '.,#' in the list."},winston_deny:{render_as:"text",label:"Denied In Selector",description:"A comma-separated list of items that should never exist in a tag. Formatting is the same as accept selectors above.",options:[]}};document.addEventListener("DOMContentLoaded",function(){var e=0;var t=undefined;document.getElementById("settings_block").appendChild(document.createElement("BR"));Object.keys(SETTINGS).forEach(function(e){t=SETTINGS[e];var n=t.render;var r=undefined;if(t.render_as!="text"){var i=t.render_as=="aldn"?[["1","Allow"],["0","Deny"]]:t.options;r=getSelect(e,i,localStorage[e])}else{r=getTextInput(e,localStorage[e])}r.id=e;var s=document.createElement("DIV");s.className="widmh";label=document.createElement("LABEL");label.appendChild(document.createTextNode(t.label));s.appendChild(label);s.appendChild(r);s.appendChild(document.createElement("BR"));var o=document.createElement("SMALL");o.appendChild(document.createTextNode(t.description));s.appendChild(document.createElement("BR"));s.appendChild(o);s.appendChild(document.createElement("BR"));s.appendChild(document.createElement("HR"));document.getElementById("settings_block").appendChild(s)});restore_options();$(".vnm").html("ver "+localStorage["winston_version_number"]);$("#used").hide();document.getElementById("clear_saved").addEventListener("click",function(){localStorage["winston_saved"]="[]"});$("a.wcop").bind("click",function(e){data=JSON.parse(localStorage["winston_saved"])[parseInt(e.target.id)]["data"];copyToClipboard(data)});$("a.wdel").bind("click",function(e){data=JSON.parse(localStorage["winston_saved"]);data.splice(parseInt(e.target.id),1);localStorage["winston_saved"]=JSON.stringify(data);$(e.target).parent().parent().parent().remove()});$("a.wres").bind("click",function(e){chrome.extension.sendMessage({action:"Winston",target:"setevents",values:JSON.parse(localStorage["winston_saved"])[parseInt(e.target.id)]["data"]});alert("Restored capture into (hopefully running somewhere) winston bar")});$(".saveBtn").click(function(){var e=undefined;var t=0;var n=undefined;Object.keys(SETTINGS).forEach(function(r){n=SETTINGS[r];e=document.getElementById(r);t=n.render_as!="text"?e.children[e.selectedIndex].value:e.value;localStorage[r]=t});if($("#winston_save").attr("checked")=="checked"){localStorage["winston_do_saved"]="y"}else{localStorage["winston_do_saved"]=""}if($("#winston_wait").attr("checked")=="checked"){localStorage["winston_wait"]="1"}else{localStorage["winston_wait"]="0"}var r=document.getElementById("status");r.innerHTML="Options Saved.";chrome.extension.sendMessage({action:"Options",target:"reload"});setTimeout(function(){window.location.reload()},750)})})